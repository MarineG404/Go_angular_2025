<div class="page-container">
  <div class="header-game">
    <h1>My Go Game <app-theme-toggle></app-theme-toggle> </h1>
    <div class="info-game">
      <details>
        <summary class="info-bubble">i</summary>
        <div class="info-panel">
          <p><strong>Left click:</strong> places a stone of your color on an empty spot</p>
          <p><strong>Right click:</strong> removes an opponent's stone and increases your score</p>
          <p><strong>"End Turn" button:</strong> switches to the next player</p>
          <p><strong>"Pass" button:</strong> if both players pass consecutively, the game ends.</p>
        </div>
      </details>
    </div>

    <div class="global-info">
      Current player : {{ currentPlayer() }}

      <div class="scores-table">
        <div class="scores-item">
          Player 1 : {{ showScores()['player1'] }}
        </div>
        <div class="scores-item">
          Player 2 : {{ showScores()['player2'] }}
        </div>
      </div>
    </div>

    @if (!endGame()){
      <div class="actions">
        <button (click)="endTurn()"> End of turn</button>
        <button (click)="pass()"> Pass turn</button>
        <button (click)="resetGame()"> Restart Game</button>
      </div>
      <div class="actions">
        <button (click)="saveGameToFile()"><i class="ri-download-line"></i> Save Game</button>
        <label class="btn-link">
          <i class="ri-upload-line"></i> Load Game
          <input type="file" accept=".json" (change)="loadGameFromFile($event)" hidden>
        </label>
        <button (click)="saveParty()"><i class="ri-save-line"></i> Sauvegarder la partie</button>
        <a routerLink="/parties" class="btn-link"><i class="ri-folder-open-line"></i> Voir les parties</a>
      </div>
    }
  </div>

  @if (endGame()) {
    <div class="game-over">
      Game Over! Winner: {{getWinner()}}
      <button (click)="resetGame()"> Restart Game</button>
    </div>
  }

  @if (!endGame()) {
    <div class="game-container">
      <app-game-board></app-game-board>
      <app-cells></app-cells>
    </div>
  }
</div>
